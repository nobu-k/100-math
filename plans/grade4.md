# 第4学年（Grade 4）問題計画

## カリキュラム概要

第4学年では、億・兆の単位、概数（四捨五入・見積もり）、多位数の除法筆算、小数の四則（乗除は整数×小数など）、同分母分数の加減、四則混合・( ) 付き式、計算の性質（交換・結合・分配法則）、平行・垂直、平行四辺形・ひし形・台形、直方体・立方体、面積（cm², m², km²）、角度、伴って変わる二つの量、折れ線グラフ、二次元の表を扱う。

---

## A. 数と計算

### A1. 整数の表し方（億・兆）

**カリキュラム要件:**
- 億、兆の単位
- 十進位取り記数法の理解を深める
- 大きな数を3桁区切りで表す場合にも触れる

**問題タイプ:**

#### A1-1. 大きな数の読み書き
- 「三億四千二百万」→ 数字で書く
- 位取りの分解：「5億 = 5 × □」
- 10倍、100倍、1/10 の関係

**UI設計:**
- 3年生の拡張。位取り表を万・億まで拡張
- 10問程度
- 設定: 範囲（〜億、〜兆）

### A2. 概数（がいすう）

**カリキュラム要件:**
- 概数が用いられる場面
- 四捨五入
- 目的に応じた見積もり

**問題タイプ:**

#### A2-1. 四捨五入
- 「2847を百の位までの概数にしなさい」→ 2800
- 「36521を上から2桁の概数にしなさい」→ 37000
- 四捨五入する位を指定

**UI設計:**
- 問題文 + 回答欄の1行形式
- 10問程度
- 設定: 数の桁数（3〜6桁）、概数にする位（十の位、百の位、千の位、上から○桁）

**実装メモ:**
- 四捨五入の処理: 指定位の1つ下の桁を見て5以上なら切り上げ
- 以上・以下・未満の問題も出題可能

#### A2-2. 見積もり（和・差・積・商の概算）
- 「298 + 512 はおよそいくつ？」（上から1桁の概数で見積もり）
- 「48 × 32 はおよそいくつ？」

**UI設計:**
- 式 → 概算結果の形式
- まず概数に直してから計算する手順を表示
- 10問程度

### A3. 整数の除法（わり算の筆算）

**カリキュラム要件:**
- 除数1〜2位数、被除数2〜3位数の除法筆算
- 商の見積もり
- (被除数) = (除数) × (商) + (余り) の関係
- 除法の性質（除数・被除数に同じ数をかけても商は変わらない）

**問題タイプ:**

#### A3-1. わり算の筆算
- **既存機能**: Hissan（÷）で対応済み
- 被除数2〜4桁、除数1〜2桁の設定

#### A3-2. 検算の練習
- 「72 ÷ 5 = 14 あまり 2 を確かめなさい」
- → 5 × 14 + 2 = 72 の式を書く

**UI設計:**
- 除法の答え（商と余り）を提示し、検算式を書かせる
- 8問程度

**実装メモ:**
- (除数) × (商) + (余り) = (被除数) の式を空欄で出す

### A4. 小数とその計算

**カリキュラム要件:**
- 何倍かを小数で表す
- 小数が整数と同じ仕組みで表されている
- 小数の加減
- 乗数・除数が整数の場合の小数の乗除
- 整数÷整数で商が小数になる場合も含む

**問題タイプ:**

#### A4-1. 小数の筆算（加減乗除）
- **既存機能**: Hissan の小数モードで対応済み
- 小数+整数、小数×整数、小数÷整数

#### A4-2. 小数の位取り
- 「0.1 が 23個で □」→ 2.3
- 「4.7 は 0.1 が □個」→ 47
- 「3.2 の10倍は □」「3.2 の 1/10 は □」

**UI設計:**
- 穴埋め形式
- 10問程度
- 設定: 1/10の位まで / 1/100の位まで

### A5. 分数とその加減

**カリキュラム要件:**
- 大きさの等しい分数がある（簡単な場合）
- 同分母の分数の加減
- 真分数・仮分数・帯分数

**問題タイプ:**

#### A5-1. 同分母の分数の加減
- **既存機能**: Fraction で対応済み

#### A5-2. 真分数・仮分数・帯分数の変換
- 「7/4 を帯分数にしなさい」→ 1と3/4
- 「2と1/3 を仮分数にしなさい」→ 7/3

**UI設計:**
- 分数表示（既存コンポーネント流用）で変換問題
- 10問程度
- 設定: 分母の範囲（2〜10）

**実装メモ:**
- 仮分数→帯分数: 商が整数部、余りが分子
- 帯分数→仮分数: 整数部×分母+分子 が新しい分子

### A6. 四則混合・( ) を使った式

**カリキュラム要件:**
- 四則混合の式の計算順序
- ( ) を使った式の計算
- 公式の考え方
- □、△を使った式

**問題タイプ:**

#### A6-1. 計算の順序（四則混合）
- 「3 + 4 × 5 = □」（乗除先の規則）
- 「(3 + 4) × 5 = □」（かっこ内優先）
- 「100 − 20 ÷ 4 + 3 = □」

**UI設計:**
- 横書きの式 + 回答欄
- 途中式を書くスペース（方眼マス）をオプションで表示
- 10〜15問
- 設定: 演算の種類（+−のみ、×÷のみ、全混合）、( ) の有無、項数（2〜4）

**実装メモ:**
- 式をAST（構文木）で生成し、計算順序が一意に定まるようにする
- 答えが整数になるよう逆算で数値を調整
- ( ) がある場合とない場合で答えが変わる問題ペアも面白い

### A7. 計算の性質

**カリキュラム要件:**
- 交換法則、結合法則、分配法則の理解

**問題タイプ:**

#### A7-1. 計算のくふう
- 「25 × 36 をくふうして計算しなさい」→ 25 × 4 × 9 = 900
- 「99 × 7 をくふうして計算しなさい」→ (100 − 1) × 7 = 693

**UI設計:**
- 式を提示し、工夫した計算過程と答えを書くスペース
- 回答には工夫の例を複数パターン表示
- 8問程度

**実装メモ:**
- 分配法則を使いやすい数の組み合わせを生成（25×□、99×□、101×□ など）
- 将来課題として実装を検討

---

## B. 図形

**カリキュラム要件:**
- 直線の平行・垂直
- 平行四辺形、ひし形、台形
- 立方体、直方体（見取図・展開図）
- ものの位置の表し方
- 面積（cm², m², km²、a, ha）
- 角の大きさ（度°）

**問題タイプ:**

#### B4-1. 面積の計算
- 正方形・長方形の面積
- 「たて 5cm、よこ 8cm の長方形の面積は？」
- 「面積が 36cm²、たてが 4cm の長方形のよこは？」

**UI設計:**
- 図形のSVG描画と寸法表示
- 回答欄に数値 + 単位
- 8〜10問
- 設定: 図形（正方形のみ、長方形のみ、混合）、逆算問題の有無

**実装メモ:**
- 面積 = たて × よこ の基本公式
- 逆算: 面積 ÷ 片辺 = もう片辺
- 面積の単位換算（cm² → m² など）も出題

#### B4-2. 面積の単位換算
- 「3m² = □cm²」「50000m² = □ha」
- a, ha, km² の変換

**UI設計:**
- 穴埋め形式
- 10問程度

#### B4-3. 角度の計算
- 「三角定規を組み合わせた角度を求めなさい」
- 角度の加減：「180° − 65° = □°」

**UI設計:**
- 基本的な角度の計算問題
- SVGで角度を図示するオプション
- 8〜10問
- 設定: 基本角度（30°, 45°, 60°, 90° の組み合わせ）、一般的な角度

---

## C. 変化と関係

**カリキュラム要件:**
- 伴って変わる二つの量（表、式、折れ線グラフ）
- 簡単な割合（倍の概念）

**問題タイプ:**

#### C4-1. 変わり方と表
- 正方形の数と周りの長さの関係など、規則性を見つけて表を完成
- 「段の数が 1, 2, 3, ... のとき、マッチ棒の数は？」

**UI設計:**
- 表の一部が空欄になっており、規則を見つけて埋める
- きまりを式で表す欄
- 5〜6問

**実装メモ:**
- y = ax, y = ax + b 型の関係を使用
- 表中の空欄位置をランダムに
- 将来課題

---

## D. データの活用

**カリキュラム要件:**
- データの二つの観点からの分類（二次元の表）
- 折れ線グラフの読み取り・かき方

**問題タイプ:**

#### D4-1. 折れ線グラフの読み取り
- SVGで折れ線グラフを描画
- 値の読み取り、変化の大きい期間の特定

**UI設計:**
- SVGグラフ + 設問
- 将来課題

#### D4-2. 二次元の表（整理のしかた）
- 二次元の表（クロス集計表）の空欄を埋める
- 行合計・列合計・全体合計の計算

**UI設計:**
- HTML tableで二次元表を表示
- 空欄セルに数値を入力
- 5〜6問

**実装メモ:**
- 合計の整合性チェック
- 将来課題

---

## 既存機能との対応表

| カリキュラム項目 | 既存機能 | 追加が必要な機能 |
|---|---|---|
| わり算の筆算 | Hissan（÷） | 対応済み |
| 小数の加減乗除 | Hissan（小数） | 対応済み |
| 同分母分数の加減 | Fraction | 対応済み |
| 四捨五入 | なし | **新規作成** |
| 見積もり | なし | **新規作成** |
| 四則混合・( ) の計算 | なし | **新規作成** |
| 計算のくふう | なし | 将来課題 |
| 真分数・仮分数・帯分数の変換 | なし | **新規作成** |
| 面積の計算 | なし | **新規作成** |
| 面積の単位換算 | なし | **新規作成** |
| 角度の計算 | なし | **新規作成** |
| わり算の検算 | なし | **新規作成** |
| 小数の位取り | なし | **新規作成** |
| 大きな数（億・兆） | なし | **新規作成** |
| 変わり方と表 | なし | 将来課題 |
| 折れ線グラフ | なし | 将来課題 |
| 二次元の表 | なし | 将来課題 |

## 実装優先度

1. **高**: 四則混合・( ) の計算（計算順序の理解は最重要）
2. **高**: 四捨五入・概数（多くの場面で使われる）
3. **高**: 真分数・仮分数・帯分数の変換（分数理解の基盤）
4. **中**: 面積の計算（図形と計算の融合）
5. **中**: 角度の計算（角度の概念定着）
6. **中**: 面積の単位換算
7. **中**: 見積もり（概算力）
8. **中**: 小数の位取り
9. **低**: わり算の検算
10. **低**: 大きな数（億・兆）
11. **低**: グラフ・表の問題（描画が複雑）
